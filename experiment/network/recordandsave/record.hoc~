//--This script is used to record ALL synaptic currents that a Pcell receives inside a network over time. It records total NMDA, AMPA, GAABA, GABAB
//--To save these data adjust the parameters in the save_data.hoc
//--Written 19-11-09, Nassi

proc rec_membrane_voltage(){
for (i=0;i<nPcells;i=i+1) {
	PCv[i]=new Vector()
	PCt[i]=new Vector(n)
	for j=0,n-1 {PCt[i].x[j]=j*dt }
	Pcells[i].soma cv.record(&v(.5),PCv[i],PCt[i],1) 
	}
	/*PCv[0]=new Vector()
	PCt[0]=new Vector(n)
	for j=0,n-1 {PCt[0].x[j]=j*dt }
	Pcells[0].soma cv.record(&v(.5),PCv[0],PCt[0],1)
	
	PCv[1]=new Vector()
	PCt[1]=new Vector(n)
	for j=0,n-1 {PCt[1].x[j]=j*dt }
	Pcells[0].dend[0] cv.record(&v(.5),PCv[1],PCt[1],1)*/
	
	/*PCv[2]=new Vector()
	PCt[2]=new Vector(n)
	for j=0,n-1 {PCt[2].x[j]=j*dt }
	Pcells[0].dend[1] cv.record(&v(.5),PCv[2],PCt[2],1)*/
	
	for (k=0;k<nINcells;k=k+1) {
	INv[k]=new Vector()
	INt[k]=new Vector(n)
	for j=0,n-1 {INt[k].x[j]=j*dt }
    	INcells[k].soma cv.record(&v(.5),INv[k],INt[k],1)
	}
}

proc rec_synaptic_currents() {

//-----Record AMPA synaptic current 
for i=0, (maxsyn-1) {
	campa[i]=new Vector()
	ct[0][i]=new Vector(n)
	for j=0,(n-1) {ct[0][i].x[j]=j*dt }
	Pcells[0].dend[0] cv.record(&ampa[0][i].iglu,campa[i],ct[0][i],1)
}

for i=0, (automaxsyn-1) {
	campaa[i]=new Vector()
	ct[1][i]=new Vector(n)
	for j=0,(n-1) {ct[1][i].x[j]=j*dt }
	Pcells[0].dend[0] cv.record(&autoampa[0][i].iglu,campaa[i],ct[1][i],1)
}

for i=0, (inmaxsyn-1) {
	campain[i]=new Vector()
	ct[2][i]=new Vector(n)
	for j=0,(n-1) {ct[2][i].x[j]=j*dt }
	Pcells[0].dend[0] cv.record(&ampapr[0][i].iglu,campain[i],ct[2][i],1)
}

//------Record NMDA synaptic current
for i=0, (maxsyn-1) {
cnmda[i]=new Vector()
ct[3][i]=new Vector(n)
for j=0,(n-1) {ct[3][i].x[j]=j*dt }
Pcells[0].dend[0] cv.record(&nmda[0][i].inmda,cnmda[i],ct[3][i],1)
}
for i=0, (automaxsyn-1) {
cnmdaa[i]=new Vector()
ct[4][i]=new Vector(n)
for j=0,(n-1) {ct[4][i].x[j]=j*dt }
Pcells[0].dend[0] cv.record(&autonmda[0][i].inmda,cnmdaa[i],ct[4][i],1)
}

for i=0, (inmaxsyn-1) {
cnmdain[i]=new Vector()
ct[5][i]=new Vector(n)
for j=0,(n-1) {ct[5][i].x[j]=j*dt }
Pcells[0].dend[0] cv.record(&nmdapr[0][i].inmda,cnmdain[i],ct[5][i],1)
}
//-----Record Gabaa synaptic current
for i=0, (maxsyn3-1){
cgabaa[i]=new Vector()
ct[6][i]=new Vector(n)
for j=0,n-1 {ct[6][i].x[j]=j*dt }
Pcells[0].soma cv.record(&gabaa[0][i].i,cgabaa[i],ct[6][i],1)
}
//----Record Gabab synaptic current
for i=0, (maxsyn3-1){
cgabab[i]=new Vector()
ct[7][i]=new Vector(n)
for j=0,n-1 {ct[7][i].x[j]=j*dt }
Pcells[0].soma cv.record(&gabab[0][i].i,cgabab[i],ct[7][i],1)
}
}
